<head>
    <meta charset="UTF-8">
</head>
<body >
    <link href="css/planet_info.css" rel="stylesheet">


    <script>
        var PlanetID;
        function list()
        {
            //parent.SwitchToPlanetList()
        }
        function sell()
        {
            parent.SwitchToSell()
        }   
       
    </script>
     <div style="width:760px;height:230px;margin:20px auto;text-shadow: 0px 0px 20px rgb(0, 204, 255);font-size: 120px;text-align: center;color: rgb(255, 255, 255)"  >进攻星球</div>
 
        

        <div id="INFOLIST" style="height:1100px;overflow-y:scroll;overflow-x: hidden;">

            <div id="TEMPLATE" style="visibility:collapse;position: absolute;">
        
                <div id="KKK" onclicktemplate01 style="background: url(img/stardust_info_bg.png);background-size:100% 100%;background-repeat:no-repeat;width: 1000px;height: 480px;margin:30px auto;position: relative;">
                    <div onclicktemplate02 style="width: 160px;height: 160px; left: 110px;top:140px;background: url(img/dobble_arrow_icon.png);background-size:contain;background-repeat:no-repeat;position: absolute;"></div>
                    <div onclicktemplate03 style="width: 140px;height: 140px; left: 550px;top:250px;background: url(img/time01.png);background-size:contain;background-repeat:no-repeat;position: absolute;"></div>
                    <div  class="TextBlock PlainText" style="font-size:48;top:280px;left:115px;position: absolute;width:200px ">传送</div>
                    <div  class="TextBlock PlainText" style="font-size:48;top:300px;left:300px;position: absolute;width:300px ">超时重试:</div>
                    <div  class="TextBlock PlainText" style="font-size:48;top:50px;left:300px;position: absolute;width:300px ">星球兵力:</div>
                    <div id="LABELBTTPOINT01" class="TextBlock PlainText" style="font-size:64;top:50px;left:540px;position: absolute;width:300px ">$BTTPOINT$</div>
                    
                    <div id="LABEL01" class="TextBlock PlainText" style="font-size:48;top:160px;left:300px;position: absolute;width:300px ">出战兵力:</div>
                    <div style="top:140px;left:540px;position: absolute;">
                        <input id="$INPUTBTTPOINT01$" type="number" class="TextBlock PlainText" maxlength="10" value="$ONMYWAY$" style="background:url(img/stardust_inputbox.png);background-size: cover;width: 400px;height:110px;border-width:0px;text-indent:20px;text-shadow: 0px 0px 20px rgb(0, 204, 255);vertical-align: text-top;" />
                    </div>
                </div>
            </div>
        </div>
    


    <div onclick="list()" style="background: url(img/dobble_arrow_back.png);background-size:contain; background-repeat:no-repeat;width: 120;height: 120;top:10px;left:10px;position: absolute;">
    </div>
        
    <script>
        //parent.Kpene();
        function update(){

            if(parent.GLOBAL_DATA.planet_list==null)return;
            var ele = document.getElementById("TEMPLATE");
            
            
            var len = parent.GLOBAL_DATA.planet_list.rows.length;
            var list = document.getElementById("INFOLIST");
            var innerhtml = ele.innerHTML;
            for (i = 0; i < len; i++) {
                var nele = document.createElement("div");
                innerhtml = ele.innerHTML;
                innerhtml = innerhtml.replace("$BTTPOINT$", ""+parent.GLOBAL_DATA.planet_list.rows[i].bttpoint+""); 
                innerhtml = innerhtml.replace("$ONMYWAY$", ""+parent.GLOBAL_DATA.planet_list.rows[i].onmyway+"");   
                innerhtml = innerhtml.replace("$INPUTBTTPOINT01$", "INPUTBTTPOINT"+i+"");    
                innerhtml=innerhtml.replace("onclicktemplate02", "onclick=\"fight(" + "INPUTBTTPOINT"+i +"," +i+")\"");
                innerhtml=innerhtml.replace("onclicktemplate03", "onclick=\"updatetele(" + "INPUTBTTPOINT"+i +"," +i+")\"");
                //console.log(innerhtml);
                nele.innerHTML = innerhtml;
                list.appendChild(nele);
            }
        }
        update();

        function fight(inputid,i) {
            //console.log(inputid);
            
            var ele = document.getElementById("INPUTBTTPOINT"+i);
            var onmyway=parseInt(ele.value);
            parent.PushBanner("正在准备传送,3分钟之后可以出战");
            parent.action_set_teleport ("gigaofcolony", parent.GLOBAL_DATA.username, parent.GLOBAL_DATA.planet_list.rows[i].id,parent.GLOBAL_DATA.attacking_planet, onmyway);
        }   
        function updatetele(inputid,i) {
            //console.log(inputid);
            
            var ele = document.getElementById("INPUTBTTPOINT"+i);
            var onmyway=parseInt(ele.value);
            
            parent.action_update_teleport ("gigaofcolony", parent.GLOBAL_DATA.username, parent.GLOBAL_DATA.planet_list.rows[i].id);
        }   
    </script>

</body>