<!DOCTYPE html>
<html lang="en-us">
  <head>
    <link href="../css/planet_info.css" rel="stylesheet">
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Unity WebGL Player | SweetHome</title>
    <script src="Build/UnityLoader.js"></script>
    <script>
      var gameInstance = UnityLoader.instantiate("gameContainer", "Build/output.json");
      function SetCoord(x,y)
      {
        var res;
        res=parent.XY2ID(x+":"+y);
        parent.GLOBAL_DATA.attacking_planet=res;
        parent.GLOBAL_DATA.selected_planet=res;
        parent.PushBanner("当前选中星球"+x+":"+y);
        parent.Set_User_Info_Text ("04","当前选择星球 "+x+":"+y);
      }
      
      function hide_unity()
      {
          parent.HideUnityFrame()
         
      }
      function buy_planet()
        {
            GetPlanetID();
            planet= parent.GLOBAL_DATA.selected_planet;
            parent.action_transfer("eosio.token", parent.GLOBAL_DATA.username ,"gigaofcolony","1.0000 EOS","STARDUSTBNP$"+planet);
        }   
        function GetPlanetID()
        {
            PlanetID=parent.g_Selected_PlanetID;
        }
    </script>
  </head>
  <body style="margin: 0px 0px;position: relative; background-color: rgb(43, 34, 100);">
    <div style="position: relative;width: 1440; height: 1800px; margin: 0px auto;padding: 0px">
    <div id="gameContainer" style="width: 1440; height: 1800px; margin: 140px auto"></div>
    </div>


    <div style="position: absolute;top:0px;left:00px;width: 1440px;height: 300px;background-color: rgba(3, 33, 63,0.2)">

      <div class="PlainText" style="position: absolute;font-size:64px;top:20px;left:380px;color: white;width: 300px;height: 100px;">拥有者:</div>
      <div class="PlainText" id="LABELOWNER01" style="text-anchor: end ;position: absolute;font-size:64px;top:30px;left:680px;color: white;width: 600px;height: 100px;">NO MAN</div>
      <div onclick="buy_planet()" id="BUYPLANETBUTTON" style="border-radius: 18px;;position: absolute;top:120px;left:500px;width: 440px;height: 160px;background-color: rgba(22, 76, 129, 1.0)">

        <div  style="background:url(../img/buy_planet.png);background-size: 100% 100%; width:140px;height:120px;top:20px;left:20px;position: absolute;">
        </div>
        <div  class="TextBlock PlainText" style="font-size:36px;top:50px;left:180px;position: absolute;">买下无人星球</div>
      </div>
    </div>
    <div onclick="hide_unity()" style="background:
        url(../img/dobble_arrow_back.png);background-size:contain;
        background-repeat:no-repeat;width: 220px;height:
        220px;top:30px;left:30px;position: absolute;">
    
    </div>
    <script>
        function UpdateGlobalData() {

            var ele = document.getElementById("LABELOWNER01");
            var button = document.getElementById("BUYPLANETBUTTON");
            
              if (parent.GLOBAL_DATA.selected_planet_info != null) {
              if (parent.GLOBAL_DATA.selected_planet_info.rows.length > 0) {
                ele.innerText = parent.GLOBAL_DATA.selected_planet_info.rows[0].owner;
                button.style.visibility="hidden";
              } else {
                ele.innerText = "NO MAN";
                button.style.visibility="visible";
              }

            } else {
              ele.innerText = "NO MAN";
              button.style.visibility="visible";
            }
            window.setTimeout(function () {

              UpdateGlobalData();
            }, 100 * 3);
          }
          UpdateGlobalData();
    </script>
    <script>
      function SetCameraPos(x,y)
      {
        gameInstance.SendMessage("EventSystem","SetCameraPos",x+":"+y);

      }
      
    </script>
  </body>
</html>
