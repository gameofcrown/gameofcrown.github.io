<head>
    <meta charset="UTF-8">
</head>
<body>
    <div style="width:760px;height:230px;margin:20px auto;text-shadow: 0px 0px 20px rgb(0, 204, 255);font-size: 120px;text-align: center;color: rgb(255, 255, 255)"  >消息</div>
 
    <div id="INFOLIST" style="height:1100px;overflow-y:scroll;overflow-x: hidden;">

        
    </div>
    <div id="TEMPLATE" style="visibility:collapse;position: absolute;">
        
        <div id="KKK" style="background: url(img/stardust_info_bg.png);background-size:contain;background-repeat:no-repeat;width: 1000px;height: 360px;margin:30px auto;position:relative;">
            
            <div id="LABEL01" class="TextBlock PlainText" style="font-size:36px;top:50px;left:300px;position: absolute;width:500px;color:  rgb(0, 204, 255); ">$INFO$</div>
        </div>
    
    </div>

    <script>
            //parent.Kpene();
    function update() {

            if(parent.GLOBAL_DATA.notice_list==null)
            {
                return;
            }
            var ele = document.getElementById("TEMPLATE");
            
            var len = parent.GLOBAL_DATA.notice_list.rows.length;
            var list = document.getElementById("INFOLIST");
            list.innerHTML="";
            var innerhtml = ele.innerHTML;
            for (i = 0; i < len; i++) {
                var nele = document.createElement("div");
                innerhtml = ele.innerHTML;
                innerhtml = innerhtml.replace("$INFO$", ""+notice2str(parent.GLOBAL_DATA.notice_list.rows[i])+"");    
               
                nele.innerHTML = innerhtml;//.replace("onclicktemplate02","onclick=\"detail("+i+")\"");
                list.appendChild(nele);
            }

        }
        update();
    function detail(id)
    {
        parent.SwitchToPlanetInfo(id)
        parent.GLOBAL_DATA.selected_planet=parent.GLOBAL_DATA.planet_list.rows[id].id;
        
    }   
    function UpdateGlobalData()
       {
        
       update();
        window.setTimeout( function(){

            UpdateGlobalData();
        },1000*2);
       }
       UpdateGlobalData();
    function notice2str(n)
    {
   
        var xystr=parent.ID2XY(n.myplanet);
        if(n.act=="soldt")
        {
            return "你的星球:"+parent.ID2XY(n.myplanet)+"已被"+n.who+"买下.";
        }
        if(n.act=="buyt")
        {
            return "你已经买下"+n.who+"的星球:"+parent.ID2XY(n.myplanet)+".";
        }
        if(n.act=="buy")
        {
            return "你已经买下无人星球:"+n.myplanet+".";
        }
        if(n.act=="attacked")
        {
            return "你的星球:"+parent.ID2XY(n.myplanet)+"已被星球"+parent.ID2XY(n.coord)+"攻击,敌方星球战力"+n.bttpoint;
        }
        if(n.act=="attack")
        {
            return "你的星球:"+parent.ID2XY(n.myplanet)+"攻击了星球"+parent.ID2XY(n.coord)+"敌方战力:"+n.bttpoint;
        }
    }
    </script>
    

</body>